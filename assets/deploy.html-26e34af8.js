import{_ as o,r as c,o as l,c as i,a as s,b as n,d as e,e as t}from"./app-3c354f83.js";const p="/vuepress2-blog/images/deploy/1.png",u="/vuepress2-blog/images/deploy/2.png",d="/vuepress2-blog/images/deploy/3.png",r="/vuepress2-blog/images/deploy/4.png",k="/vuepress2-blog/images/deploy/5.jpg",m={},v=t('<h1 id="部署" tabindex="-1"><a class="header-anchor" href="#部署" aria-hidden="true">#</a> 部署</h1><h2 id="github-pages-and-github-actions" tabindex="-1"><a class="header-anchor" href="#github-pages-and-github-actions" aria-hidden="true">#</a> GitHub Pages and Github Actions</h2><ol><li>在 <code>docs/.vuepress/config.js</code> 中设置正确的 <code>base</code>。 如果你打算发布到 <code>https://&lt;USERNAME&gt;.github.io/</code>，则可以省略这一步，因为 <code>base</code> 默认即是 <code>&quot;/&quot;</code>。</li></ol><p>如果你打算发布到 <code>https://&lt;USERNAME&gt;.github.io/&lt;REPO&gt;/</code>（也就是说你的仓库在 <code>https://github.com/&lt;USERNAME&gt;/&lt;REPO&gt;</code>），则将 <code>base</code> 设置为 <code>&quot;/&lt;REPO&gt;/&quot;</code></p>',4),b={start:"2"},g={href:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token",target:"_blank",rel:"noopener noreferrer"},h=s("p",null,[s("img",{src:p,alt:"Github access token"})],-1),_={start:"3"},y={href:"https://docs.github.com/en/actions/security-guides/encrypted-secrets",target:"_blank",rel:"noopener noreferrer"},E=s("code",null,"token",-1),f=t('<p><img src="'+u+'" alt="secrets"></p><p><img src="'+d+'" alt="secrets"></p><p><img src="'+r+`" alt="secrets"></p><ol start="4"><li>github 仓库中创建 <code>gh-pages</code> 分支</li><li>在项目根目录下的 <code>.github/workflows</code> 目录（没有的话，请手动创建一个）下创建一个 <code>.yml</code> 或者 <code>.yaml</code> 文件，如:<code>vuepress-deploy.yml</code></li></ol><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code>  <span class="token key atrule">name</span><span class="token punctuation">:</span> GitHub Actions Build and Deploy Demo
<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> main
<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build-and-deploy</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout
      <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@main
      <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">persist-credentials</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

    <span class="token comment"># 生成静态文件</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build
      <span class="token key atrule">run</span><span class="token punctuation">:</span> yarn install <span class="token important">&amp;&amp;</span> yarn run docs<span class="token punctuation">:</span>build

    <span class="token comment"># 部署到 GitHub Pages</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy
      <span class="token comment"># 使用别人写好的一个 action</span>
      <span class="token key atrule">uses</span><span class="token punctuation">:</span> JamesIves/github<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>action@releases/v3
      <span class="token key atrule">with</span><span class="token punctuation">:</span>
        <span class="token comment"># 这里的 ACCESS_TOKEN 名字需要和下文中的相对应</span>
        <span class="token key atrule">ACCESS_TOKEN</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token comment"># 打包后的文件部署到哪个分支上</span>
        <span class="token key atrule">BRANCH</span><span class="token punctuation">:</span> gh<span class="token punctuation">-</span>pages
        <span class="token comment"># 打包后的文件在哪里</span>
        <span class="token key atrule">FOLDER</span><span class="token punctuation">:</span> docs/.vuepress/dist
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>之后push到 <code>main 分支</code> 都会自动执行部署任务，可以从Pages 查看部署网站 <img src="`+k+'" alt="Pages"></li></ol>',6);function N(x,A){const a=c("ExternalLinkIcon");return l(),i("div",null,[v,s("ol",b,[s("li",null,[n("创建 "),s("strong",null,[s("a",g,[n("Github access token"),e(a)])]),n(";")])]),h,s("ol",_,[s("li",null,[n("在你 github 仓库下，创建一个 "),s("strong",null,[s("a",y,[n("secrets"),e(a)])]),n(" ，填入刚创建的 "),E])]),f])}const S=o(m,[["render",N],["__file","deploy.html.vue"]]);export{S as default};
